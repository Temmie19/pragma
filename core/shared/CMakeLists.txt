include("../../CMakeShared.txt")

link_external_library(engine)
link_external_library(server)
link_external_library(recast)
link_external_library(detour)
link_external_library(util_pad)
link_external_library(util_versioned_archive)
link_external_library(libvorbis)
link_external_library(libogg)
link_external_library(libnoise)
link_external_library(clip2tri)
link_external_library(util_bsp)
link_external_library(util_vmf)
link_external_library(util_fgd)
link_external_library(util_mmd)
link_external_library(util_smdmodel)
link_external_library(util_source_script)
link_external_library(RectangleBinPack)
link_external_library(assimp)
link_external_library(bzip2)
link_external_library(VTFLib)

add_external_library(luajit)
add_external_library(lua)
add_external_library(libvorbisfile)
add_external_library(libnoise)
add_external_library(clipper)
add_external_library(poly2tri)
add_external_library(bullet_dynamics)
add_external_library(bullet_collision)
add_external_library(bullet_softbody)
add_external_library(bullet_linear_math)

add_include_dir(pr_steamworks)
add_include_dir(eigen)
add_include_dir(miniball)
add_include_dir(client)
add_include_dir(cengine)

add_def(DLLNETWORK_EX)
add_def(ENGINE_NETWORK)
add_def(_ENABLE_EXTENDED_ALIGNED_STORAGE)

set(CONFIG_ENABLE_MIKU_MIKU_DANCE_ASSET_SUPPORT "1" CACHE BOOL "Enable asset support for MikuMikuDance.")
if($(CONFIG_ENABLE_MIKUMIKUDANCE_ASSET_SUPPORT) MATCHES ON)
	list(APPEND DEFINITIONS ENABLE_MMD_IMPORT)
endif()

set(PRECOMPILED_HEADER "stdafx_shared")

add_compile_options(/bigobj)

def_project(shared lib)

link_boost_library(shared DEPENDENCY_BOOST_DATE_TIME_LIBRARY boost_date_time-vc141-mt-x64-1_69.lib)
link_boost_library(shared DEPENDENCY_BOOST_REGEX_LIBRARY boost_regex-vc141-mt-x64-1_69.lib)
link_boost_library(shared DEPENDENCY_BOOST_THREAD_LIBRARY boost_thread-vc141-mt-x64-1_69.lib)
link_boost_library(shared DEPENDENCY_BOOST_CHRONO_LIBRARY boost_chrono-vc141-mt-x64-1_69.lib)
